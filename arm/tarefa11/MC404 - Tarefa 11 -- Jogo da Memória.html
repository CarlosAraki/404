<!DOCTYPE html>
<!-- saved from url=(0054)https://susy.ic.unicamp.br:9999/mc404abe/11/enunc.html -->
<html lang="pt"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
     <title>MC404 - Tarefa 11 -- Jogo da Memória</title>
  </head>
<body>	
<h1>MC404 -- Tarefa 11 -- Jogo da Memória</h1>

Escreva um programa para implementar um Jogo de Memória simples.  O
jogo tem um teclado, um mostrador de dois dígitos de sete segmentos,
um painel com três leds (verde, amarelo e vermelho)
um botão do tipo "push" e um controle deslizante (slider).  O mostrador de dois dígitos
vai ser usado para mostrar números que devem ser memorizados. O controle deslizante vai
ser utilizado para determinar a velocidade do jogo, e deve variar em
uma escala de 1 (mais lento) a 5 (mais rápido). O controle deslizante
inicia na posição 1. O painel de leds vai ser utilizado para mostrar
o estado do jogo. O botão vai ser utilizado para iniciar o jogo.

<center>
<img src="./MC404 - Tarefa 11 -- Jogo da Memória_files/memoria.png" width="400px">
</center>

<p>A cada jogada, o programa mostra uma sequência aleatória de F números entre 00 e 99, onde
F é a <i>Fase</i> do jogo. O jogo inicia na Fase 1 (ou seja, mostrando uma 
sequência de apenas um número). O jogador deve então digitar no teclado a
sequência mostrada. Se o jogador acerta a sequência, o jogo passa para a Fase
seguinte (F é incrementado, e na jogada seguinte a sequência de números
tem um número a mais); se o jogador erra, a Fase do jogo permanece a mesma.

</p><p>Inicialmente, o mostrador está desligado e os leds estão desligados.
O jogador pressiona o botão e o jogo inicia, com F=1. A cada jogada:

</p><ul>
<li>o jogo mostra uma sequência de F números aleatórios (veja abaixo como gerar um 
número aleatório), da sequinte forma: mostra um número por um tempo T<sub>Lig</sub>,
deixa o mostrador desligado por um tempo T<sub>Desl</sub> (para separar os números
mostrados). Os tempos T<sub>Lig</sub> e T<sub>Desl</sub> são dependentes
do estado do controle deslizante, que controla a velocidade do jogo. Na velocidade
1 (inicial), use por exemplo T<sub>Lig</sub>=2s e T<sub>Desl</sub>=1s. Para cada velocidade
subsequente (2, 3,... alterando o controle deslizante), diminua em 100ms o valor de cada um desses tempos.
</li><li>Os números deve ser mostrados sempre com dois dígitos (por exemplo, o valor 9 deve ser mostrado como 09).

</li><li>Ao final da sequência, inicia o Tempo de Resposta
T<sub>Resp</sub>, ou seja o tempo que o jogador tem para responder,
entrando com a sequência mostrada pelo teclado. O jogador deve então
digitar no teclado a sequência de números mostrada, e os números
digitados devem ser mostrados no mostrador. Inicialmente o mostrador
está com os dois dígitos apagados. Para cada número o jogador vai
sempre digitar dois dígitos (assuma que o jogador vai obedecer, não
precisa se preocupar com erros).

<ul>
<li>Quando o jogador pressiona a primeira tecla, o dígito
correspondente deve ser mostrado no dígito mais significativo do
mostrador (o dígito menos significativo deve continuar apagado).
</li><li>Quando o jogador pressiona a segunda tecla, o dígito
correspondente deve ser mostrado no dígito menos significativo do
mostrador (o dígito mais significativo deve continuar mostrando o
primeiro dígito).
</li></ul>

</li><li>
Se o número digitado pelo jogador está correto, o mostrador apaga os
dois dígitos após 50ms e espera pelo próximo número digitado.  Se o
número digitado pelo jogador está errado, o jogador "perde": o mostrador "pisca" três
vezes o valor "EE" no mostrador (100ms aceso, 100ms apagado a cada
piscada), indicando o erro, e volta para o estado Desligado. O jogador
deve apertar o botão novamente para iniciar um outro jogo, que
iniciará na mesma Fase.
</li><li>
Se o jogador digita corretamente todos os números da sequência, o
mostrador "pisca" cinco vezes o valor "CC" no mostrador (100ms aceso,
100ms apagado a cada piscada), indicando sucesso, e volta para o
estado Desligado (o jogador deve apertar o botão novamente para
iniciar um outro jogo, que iniciará na Fase seguinte).

</li><li>O Tempo de Resposta depende do controle deslizante. Inicie
por exemplo com T<sub>Resp</sub>= F x 5s para a velocidade inicial (controle deslizante em 1), e
diminua de 500ms  esse valor para cada velocidade subsequente. Ou seja, 
T<sub>Resp</sub>= 1 x 5s para o controle deslizante em 1, 
T<sub>Resp</sub>= 1 x 4.5s para  o controle deslizante em 2, 
T<sub>Resp</sub>= 1 x 4.0s para  o controle deslizante em 3, etc.  

</li><li>Os leds indicam a progressão do Tempo de Resposta. Ao iniciar o Tempo de Resposta,
o led verde é aceso (indicando que há bastante tempo para o jogador concluir a digitação da sequência);
Quando metade do Tempo de Resposta passa, o led verde é apagado e o led amarelo é aceso; quando
três quartos do tempo de resposta passam, o led amarelo é apagado e o led vermelho é aceso.
Quando o jogo está no estado desligado (após o usuário acertar ou errar a sequência),
os leds devem estar apagados.

</li><li>Se o Tempo de Resposta "estourar" (terminar o tempo que o jogador tem para responder),
o jodador "perde": o mostrador "pisca" três
vezes o valor "EE" no mostrador (100ms aceso, 100ms apagado a cada
piscada), e volta para o estado Desligado. O jogador
deve apertar o botão novamente para iniciar um outro jogo, que
iniciará na mesma Fase.
</li></ul>



<p>Considere que o jogador somente altera o controle deslizante quando o jogo
está Desligado. Veja em <a href="http://www.ic.unicamp.br/~ranido/livrolm/documentos/manual_dispositivos.html">Manual
de dispositivos</a>
os parâmetros para criar um controle deslizante para o simulador.


</p><h3>Submissão</h3> 
<p>Você deve submeter o seu programa-fonte em
linguagem de montagem ARM. O arquivo de submissão deve
chamar-se <tt>tarefa11.s</tt>.  Neste laboratório, o Susy está sendo
utilizado apenas para entrega, e o Susy não faz nenhuma verificação de
correção. Para validar a entrega e receber a nota, você deverá mostrar
o seu programa funcionando em uma aula de laboratório, para o
professor ou para um dos monitores.

</p><h3>Endereços dos dispositivos</h3>
Você pode escolher os endereços e as interrupções que quiser.

<h3>Gerador de números aleatórios</h3>
<p>Para exercitar o uso do ligador para construção de um arquivo executável a partir de mais de um arquivo objeto, vamos utilizar um
gerador de números aleatórios, escrito em C, para gerar os números da sequência
aleatória. Baixe <a href="http://www.ic.unicamp.br/~ranido/mc404/labs/random_leds.zip">aqui
um exemplo</a> de uso do gerador em C. O gerador de números aleatórios
é dado em um arquivo de nome <tt>random.c</tt>.

</p><p>Para criar o arquivo executável de seu programa é necessário usar três programas: o compilador C, o montador e o ligador
GNU-ARM (respectivamente 
<i>arm-none-eabi-gcc</i>, <i>arm-none-eabi-as</i> e <i>arm-none-eabi-ld</i>). O compilador, o montador e o simulador já estão instalados no lab.
Você
pode por exemplo usar os seguintes comandos para criar o arquivo executável de nome tarefa11:
</p><pre>arm-none-eabi-gcc -c random.c
arm-none-eabi-as -o tarefa11.o tarefa11.s
arm-none-eabi-ld -o tarefa11 -Tmapa.lds tarefa11.o random.o
</pre>

<p>O primeiro comando acima compila o arquivo random.c, gerando o arquivo objeto random.o (a flag -c indica para o gcc não gerar um arquivo executável, como é o procedimento padrão); o segundo programa cria o arquivo objeto tarefa11.o, e
finalmente o ligador é usado para gerar o arquivo executável tarefa11.

</p><p>O arquivo mapa.lds deve conter o seguinte texto:
</p><pre>SECTIONS {
  . = 0x00000000;
  .text : { * (.text); }
  . = 0x00010000;
  .data : { * (.data); }
}
</pre>


<h3>Peso</h3>
O peso deste lab na composição da nota é 2.

	
	

</body></html>